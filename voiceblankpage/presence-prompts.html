<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writing Prompts</title>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }
        body { background-color: #ffffff; font-family: 'Jost', sans-serif; display: flex; justify-content: center; align-items: center; cursor: pointer; }
        #prompt { color: #000; text-align: center; padding: 20px; opacity: 0; transition: opacity 1s; width: 90%; word-wrap: break-word; max-height: 90%; max-width: 90%; overflow: hidden; }
    </style>
</head>
<body>
    <div id="prompt"></div>

    <script>
        const prompts = [
            "Pause for a moment. What sounds surround you right now?",
            "Write about the first object you see. Why is it meaningful?",
            "Describe how you're feeling in this exact moment.",
            "List three things you're grateful for today.",
            "How can you create a cozy space for your journaling practice?",
            "Imagine your distractions fading away. What remains?",
            "Plan a 10-minute journaling session. When will you fit it in?",
            "What does 'being present' mean to you?",
            "Write about a recent moment when you felt truly yourself.",
            "\"Be happy in the moment, that's enough. Each moment is all we need, not more.\" - Mother Teresa",
            "Describe a moment today when you felt truly connected. What sensations, sounds, and details stood out to you?",
            "When do you find it easiest to stay present?",
            "\"The real voyage of discovery consists not in seeking new landscapes, but in having new eyes.\" - Marcel Proust",
            "Recall a recent moment that made you pause in wonder. What made it so impactful?",
            "\"You create a good future by creating a good present.\" - Eckhart Tolle",
            "Describe your current emotional state without judgment. What feelings are present in this moment?",
            "What small action can you take right now to enhance this moment?",
            "\"Now! It is the most important time because it is the only time when we have any power.\" - Leo Tolstoy",
            "What's preventing you from being fully present right now? How can you release these distractions?",
            "\"Forever is composed of nows.\" - Emily Dickinson",
            "What aspects of your current environment support your well-being? How can you fully appreciate them?",
            "Write about how your body feels right now. What tensions, comfort, or sensations are you aware of?",
            "\"Do not dwell in the past, do not dream of the future, concentrate the mind on the present moment.\" - Buddha",
            "How does nature help you connect with the present moment?",
            "How does time feel different when you're fully present versus when your mind is elsewhere?",
            "\"Life gives you plenty of time to do whatever you want to do if you stay in the present moment.\" - Deepak Chopra",
            "Look around your familiar space as if seeing it for the first time. What details have you never noticed before?",
            "Write about your breath right now.",
            "How does presence affect your relationships?",
            "What daily activities could benefit from more mindful attention?",
            "How does technology impact your ability to stay present?",
            "What sensations do you notice when you're fully present?",
            "How can you simplify your environment to enhance focus?"
        ];

        let shuffledPrompts = [];
        let currentIndex = 0;

        // Fisher-Yates Shuffle
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Initialize shuffled prompts
        function initializeShuffledPrompts() {
            shuffledPrompts = [...prompts];
            shuffleArray(shuffledPrompts);
            currentIndex = 0;
        }

        initializeShuffledPrompts();

        const promptElement = document.getElementById('prompt');
        let isTransitioning = false;

        function showPrompt() {
            if (isTransitioning) return;
            isTransitioning = true;

            // Fade out the current prompt
            promptElement.style.opacity = 0;

            promptElement.addEventListener('transitionend', function handleFadeOut() {
                promptElement.removeEventListener('transitionend', handleFadeOut);
                // Get the next prompt from the shuffled array
                if (currentIndex >= shuffledPrompts.length) {
                    initializeShuffledPrompts(); // Reshuffle when all prompts have been used
                }

                let randomPrompt = shuffledPrompts[currentIndex];
                currentIndex++;

                // Add line break before the dash and attribution
                randomPrompt = randomPrompt.replace(/" - /g, '"<br/>- '); 

                // Set the new prompt text
                promptElement.innerHTML = randomPrompt;

                // Use requestAnimationFrame to ensure rendering happens before adjusting
                requestAnimationFrame(() => {
                    // Adjust the font size to fit the container
                    adjustFontSize();

                    // Fade in the new prompt
                    promptElement.style.opacity = 1;

                    promptElement.addEventListener('transitionend', function handleFadeIn() {
                        promptElement.removeEventListener('transitionend', handleFadeIn);
                        isTransitioning = false;
                    });
                });
            });
        }

        function adjustFontSize() {
            let minFontSize = 10;
            let maxFontSize = 200;
            let optimalFontSize = minFontSize;

            while (minFontSize <= maxFontSize) {
                let midFontSize = Math.floor((minFontSize + maxFontSize) / 2);
                promptElement.style.fontSize = midFontSize + "px";

                if (promptElement.scrollHeight <= window.innerHeight - 40 && promptElement.scrollWidth <= window.innerWidth - 40) {
                    optimalFontSize = midFontSize;
                    minFontSize = midFontSize + 1;
                } else {
                    maxFontSize = midFontSize - 1;
                }
            }

            promptElement.style.fontSize = optimalFontSize + "px";
        }

        // Show the initial prompt
        showPrompt();

        // Debounce function to limit how often the click event can trigger
        function debounce(func, delay) {
            let timer;
            return function () {
                clearTimeout(timer);
                timer = setTimeout(() => {
                    func.apply(this, arguments);
                }, delay);
            };
        }

        // Set up event listeners
        document.body.addEventListener('click', debounce(showPrompt, 300));
        window.addEventListener('resize', adjustFontSize);
    </script>
</body>
</html>
